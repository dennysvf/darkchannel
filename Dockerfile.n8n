# Dockerfile customizado para n8n com ffmpeg e yt-dlp
FROM n8nio/n8n:1.119.2

USER root

RUN apk add --no-cache \
    ffmpeg \
    ffmpeg-libs \
    python3 \
    py3-pip \
    && rm -rf /var/cache/apk/*

RUN pip3 install --no-cache-dir \
    yt-dlp \
    --break-system-packages

# Verificar instalação
RUN yt-dlp --version && ffprobe -version

USER node

ENTRYPOINT ["tini", "--", "/docker-entrypoint.sh"]